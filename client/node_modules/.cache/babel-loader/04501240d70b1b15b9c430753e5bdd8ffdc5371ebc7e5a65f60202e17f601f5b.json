{"ast":null,"code":"import _slicedToArray from\"/home/ubuntu/app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import axios from\"axios\";import utils from\"../utilities.js\";import{please}from\"../please.js\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faWeightHanging}from\"@fortawesome/free-solid-svg-icons\";import\"./DataInput.css\";import InputFormData from\"./inputFormData\";import InputFormPet from\"./inputFormPet\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DataInput=function DataInput(_ref){var user=_ref.user,pets=_ref.pets,fetchData=_ref.fetchData,refresh=_ref.refresh;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),weight=_useState4[0],setWeight=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),unit=_useState6[0],setUnit=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showForm=_useState8[0],setShowForm=_useState8[1];var _useState9=useState(\"main\"),_useState10=_slicedToArray(_useState9,2),content=_useState10[0],setContent=_useState10[1];var _useState11=useState(Date()),_useState12=_slicedToArray(_useState11,2),weighDate=_useState12[0],setWeighDate=_useState12[1];var handleChange=function handleChange(e){console.log(e.target.id);switch(e.target.id){case\"name\":setName(e.target.value);break;case\"weight\":setWeight(e.target.value);break;case\"unit\":setUnit(e.target.value);break;case\"pet_select\":setName(pets[e.target.value-1]);break;case\"weigh_date\":setWeighDate(e.target.value);break;default:alert(\"please fill all selections\");}};//displays correct form based on event value\nvar handleFormSelect=function handleFormSelect(e){e.preventDefault();// console.log(e.target.value);\nswitch(e.target.value){case\"pet\":setShowForm(true);setContent(\"pet\");break;case\"data\":setShowForm(true);setContent(\"data\");break;case\"return\":setShowForm(false);setContent(\"main\");break;default:alert(\"Sorry, an error occurred :(\");}};var handleSubmit=function handleSubmit(e){e.preventDefault();//453.592 grams in a lb\nif(e.target.value===\"pet\"){//form validation\nif(pets.includes(name)){alert(\"that pet already exists\");return;}if(name.length<=3){alert(\"names must be longer than 3 characters\");return;}if(pets.length>=5){alert(\"Sorry, we can't handle more than 5 pets right now :(\");return;}if(weight===\"\"||weight===0){alert(\"Please enter a weight\");return;}if(unit===\"\"){alert(\"Please select a unit\");return;}console.log(name,weight,unit,weighDate);// update the db w/ new pet\nplease.createPetByUser(user,name,weight,unit,pets.length,weighDate).then(function(res){//reset form and states\nsetName(\"\");setWeight(\"\");setUnit(\"\");var form=document.querySelector(\"#weight_submit_form\");form.reset();setShowForm(false);//remove the form\nsetContent(\"main\");}).then(function(){return refresh(function(val){return!val;});}).catch(function(err){return console.log(err);});console.warn(user,name,weight,unit,Date());}//update the db with new data for existing pet\nif(e.target.value===\"data\"){console.log(name,weight,unit,weighDate);if(name.length&&Number(weight)>0&&unit){please.createDataByUser(user,name,weight,unit,pets.indexOf(\"\".concat(name)),weighDate).then(function(){//reset form and states\nsetName(\"\");setWeight(\"\");setUnit(\"\");var form=document.querySelector(\"#weight_submit_form\");form.reset();setShowForm(false);setContent(\"main\");}).then(function(){return refresh(function(val){return!val;});}).catch(function(err){return console.log(err);});}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"input_form_container\",children:[!showForm&&content===\"main\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"main_btns_container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"form_btn form_btn_main\",value:\"data\",onClick:function onClick(e){return handleFormSelect(e);},children:\"Add Weight\"}),pets.length<5&&/*#__PURE__*/_jsx(\"button\",{className:\"form_btn form_btn_main\",value:\"pet\",onClick:function onClick(e){return handleFormSelect(e);},children:\"Add New Pet\"})]}),showForm&&content===\"data\"&&/*#__PURE__*/_jsx(InputFormData,{pets:pets,handleFormSelect:handleFormSelect,handleChange:handleChange,handleSubmit:handleSubmit}),showForm&&content===\"pet\"&&pets.length<5&&/*#__PURE__*/_jsx(InputFormPet,{pets:pets,handleFormSelect:handleFormSelect,handleChange:handleChange,handleSubmit:handleSubmit}),/*#__PURE__*/_jsx(\"div\",{id:\"weight_icon_container\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faWeightHanging})})]});};export default DataInput;","map":{"version":3,"names":["React","useState","axios","utils","please","FontAwesomeIcon","faWeightHanging","InputFormData","InputFormPet","jsx","_jsx","jsxs","_jsxs","DataInput","_ref","user","pets","fetchData","refresh","_useState","_useState2","_slicedToArray","name","setName","_useState3","_useState4","weight","setWeight","_useState5","_useState6","unit","setUnit","_useState7","_useState8","showForm","setShowForm","_useState9","_useState10","content","setContent","_useState11","Date","_useState12","weighDate","setWeighDate","handleChange","e","console","log","target","id","value","alert","handleFormSelect","preventDefault","handleSubmit","includes","length","createPetByUser","then","res","form","document","querySelector","reset","val","catch","err","warn","Number","createDataByUser","indexOf","concat","className","children","onClick","icon"],"sources":["/home/ubuntu/app/client/src/DataInput/index.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport utils from \"../utilities.js\";\nimport { please } from \"../please.js\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faWeightHanging } from \"@fortawesome/free-solid-svg-icons\";\nimport \"./DataInput.css\";\nimport InputFormData from \"./inputFormData\";\nimport InputFormPet from \"./inputFormPet\";\n\nconst DataInput = ({ user, pets, fetchData, refresh }) => {\n  let [name, setName] = useState(\"\");\n  let [weight, setWeight] = useState(\"\");\n  let [unit, setUnit] = useState(\"\");\n  let [showForm, setShowForm] = useState(false);\n  let [content, setContent] = useState(\"main\");\n  let [weighDate, setWeighDate] = useState(Date());\n\n  const handleChange = (e) => {\n    console.log(e.target.id);\n    switch (e.target.id) {\n      case \"name\":\n        setName(e.target.value);\n        break;\n      case \"weight\":\n        setWeight(e.target.value);\n        break;\n      case \"unit\":\n        setUnit(e.target.value);\n        break;\n      case \"pet_select\":\n        setName(pets[e.target.value - 1]);\n        break;\n      case \"weigh_date\":\n        setWeighDate(e.target.value);\n        break;\n      default:\n        alert(\"please fill all selections\");\n    }\n  };\n\n  //displays correct form based on event value\n  const handleFormSelect = (e) => {\n    e.preventDefault();\n    // console.log(e.target.value);\n    switch (e.target.value) {\n      case \"pet\":\n        setShowForm(true);\n        setContent(\"pet\");\n        break;\n      case \"data\":\n        setShowForm(true);\n        setContent(\"data\");\n        break;\n      case \"return\":\n        setShowForm(false);\n        setContent(\"main\");\n        break;\n      default:\n        alert(\"Sorry, an error occurred :(\");\n    }\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    //453.592 grams in a lb\n    if (e.target.value === \"pet\") {\n      //form validation\n      if (pets.includes(name)) {\n        alert(\"that pet already exists\");\n        return;\n      }\n      if (name.length <= 3) {\n        alert(\"names must be longer than 3 characters\");\n        return;\n      }\n      if (pets.length >= 5) {\n        alert(\"Sorry, we can't handle more than 5 pets right now :(\");\n        return;\n      }\n      if (weight === \"\" || weight === 0) {\n        alert(\"Please enter a weight\");\n        return;\n      }\n      if (unit === \"\") {\n        alert(\"Please select a unit\");\n        return;\n      }\n\n      console.log(name, weight, unit, weighDate);\n\n      // update the db w/ new pet\n      please\n        .createPetByUser(user, name, weight, unit, pets.length, weighDate)\n        .then((res) => {\n          //reset form and states\n          setName(\"\");\n          setWeight(\"\");\n          setUnit(\"\");\n          let form = document.querySelector(\"#weight_submit_form\");\n          form.reset();\n          setShowForm(false);\n          //remove the form\n          setContent(\"main\");\n        })\n        .then(() => refresh((val) => !val))\n        .catch((err) => console.log(err));\n      console.warn(user, name, weight, unit, Date());\n    }\n\n    //update the db with new data for existing pet\n    if (e.target.value === \"data\") {\n      console.log(name, weight, unit, weighDate);\n      if (name.length && Number(weight) > 0 && unit) {\n        please\n          .createDataByUser(\n            user,\n            name,\n            weight,\n            unit,\n            pets.indexOf(`${name}`),\n            weighDate\n          )\n          .then(() => {\n            //reset form and states\n            setName(\"\");\n            setWeight(\"\");\n            setUnit(\"\");\n            let form = document.querySelector(\"#weight_submit_form\");\n            form.reset();\n            setShowForm(false);\n            setContent(\"main\");\n          })\n          .then(() => refresh((val) => !val))\n          .catch((err) => console.log(err));\n      }\n    }\n  };\n\n  return (\n    <div className=\"input_form_container\">\n      {!showForm && content === \"main\" && (\n        <div className=\"main_btns_container\">\n          <button\n            className=\"form_btn form_btn_main\"\n            value=\"data\"\n            onClick={(e) => handleFormSelect(e)}\n          >\n            Add Weight\n          </button>\n          {pets.length < 5 && (\n            <button\n              className=\"form_btn form_btn_main\"\n              value=\"pet\"\n              onClick={(e) => handleFormSelect(e)}\n            >\n              Add New Pet\n            </button>\n          )}\n        </div>\n      )}\n\n      {showForm && content === \"data\" && (\n        <InputFormData\n          pets={pets}\n          handleFormSelect={handleFormSelect}\n          handleChange={handleChange}\n          handleSubmit={handleSubmit}\n        />\n      )}\n\n      {showForm && content === \"pet\" && pets.length < 5 && (\n        <InputFormPet\n          pets={pets}\n          handleFormSelect={handleFormSelect}\n          handleChange={handleChange}\n          handleSubmit={handleSubmit}\n        />\n      )}\n\n      <div id=\"weight_icon_container\">\n        <FontAwesomeIcon icon={faWeightHanging} />\n      </div>\n    </div>\n  );\n};\n\nexport default DataInput;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}