{"ast":null,"code":"import _regeneratorRuntime from\"/home/ubuntu/app/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/ubuntu/app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{initializeApp}from\"firebase/app\";// import { getAnalytics } from \"firebase/analytics\";\nimport{GoogleAuthProvider,getAuth,signInWithPopup,signInWithEmailAndPassword,createUserWithEmailAndPassword,sendPasswordResetEmail,signOut}from\"firebase/auth\";import{getFirestore,query,getDocs,collection,where,addDoc}from\"firebase/firestore\";import firebaseConfig from\"../firebaseOptions.js\";console.warn(firebaseConfig);// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n// Your web app's Firebase configuration\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\n// Initialize Firebase\nvar app=initializeApp(firebaseConfig);// const analytics = getAnalytics(app);\nvar auth=getAuth(app);var db=getFirestore(app);//login with google\nvar googleProvider=new GoogleAuthProvider();var signInWithGoogle=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var res,user,q,docs;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return signInWithPopup(auth,googleProvider);case 4:res=_context.sent;user=res.user;q=query(collection(db,\"users\"),where(\"uid\",\"==\",user.uid));_context.next=9;return getDocs(q);case 9:docs=_context.sent;if(!(docs.docs.length===0)){_context.next=14;break;}console.warn(\"oi\");_context.next=14;return addDoc(collection(db,\"users\"),{uid:user.uid,name:user.displayName,authProvider:\"google\",email:user.email});case 14:_context.next=20;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](1);console.error(_context.t0);alert(_context.t0.message);case 20:case\"end\":return _context.stop();}},_callee,null,[[1,16]]);}));return function signInWithGoogle(_x){return _ref.apply(this,arguments);};}();//login with email/password\nvar logInWithEmailAndPassword=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(email,password){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return signInWithEmailAndPassword(auth,email,password);case 3:_context2.next=9;break;case 5:_context2.prev=5;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);alert(_context2.t0.message);case 9:case\"end\":return _context2.stop();}},_callee2,null,[[0,5]]);}));return function logInWithEmailAndPassword(_x2,_x3){return _ref2.apply(this,arguments);};}();//register new user w/ email/password\nvar registerWithEmailAndPassword=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(name,email,password){var res,user;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return createUserWithEmailAndPassword(auth,email,password);case 3:res=_context3.sent;user=res.user;_context3.next=7;return addDoc(collection(db,\"users\"),{uid:user.uid,name:name,authProvider:\"local\",email:email});case 7:_context3.next=13;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](0);console.error(_context3.t0);alert(_context3.t0.message);case 13:case\"end\":return _context3.stop();}},_callee3,null,[[0,9]]);}));return function registerWithEmailAndPassword(_x4,_x5,_x6){return _ref3.apply(this,arguments);};}();//reset password\nvar sendPasswordReset=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(email){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return sendPasswordResetEmail(auth,email);case 3:alert(\"Password reset link sent!\");_context4.next=10;break;case 6:_context4.prev=6;_context4.t0=_context4[\"catch\"](0);console.error(_context4.t0);alert(_context4.t0.message);case 10:case\"end\":return _context4.stop();}},_callee4,null,[[0,6]]);}));return function sendPasswordReset(_x7){return _ref4.apply(this,arguments);};}();//logout\nvar logout=function logout(){signOut(auth);};export{auth,db,signInWithGoogle,logInWithEmailAndPassword,registerWithEmailAndPassword,sendPasswordReset,logout};","map":{"version":3,"names":["initializeApp","GoogleAuthProvider","getAuth","signInWithPopup","signInWithEmailAndPassword","createUserWithEmailAndPassword","sendPasswordResetEmail","signOut","getFirestore","query","getDocs","collection","where","addDoc","firebaseConfig","console","warn","app","auth","db","googleProvider","signInWithGoogle","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","res","user","q","docs","wrap","_callee$","_context","prev","next","preventDefault","sent","uid","length","name","displayName","authProvider","email","t0","error","alert","message","stop","_x","apply","arguments","logInWithEmailAndPassword","_ref2","_callee2","password","_callee2$","_context2","_x2","_x3","registerWithEmailAndPassword","_ref3","_callee3","_callee3$","_context3","_x4","_x5","_x6","sendPasswordReset","_ref4","_callee4","_callee4$","_context4","_x7","logout"],"sources":["/home/ubuntu/app/client/src/authentication/firebase.js"],"sourcesContent":["import { initializeApp } from \"firebase/app\";\n// import { getAnalytics } from \"firebase/analytics\";\n\nimport {\n  GoogleAuthProvider,\n  getAuth,\n  signInWithPopup,\n  signInWithEmailAndPassword,\n  createUserWithEmailAndPassword,\n  sendPasswordResetEmail,\n  signOut,\n} from \"firebase/auth\";\nimport {\n  getFirestore,\n  query,\n  getDocs,\n  collection,\n  where,\n  addDoc,\n} from \"firebase/firestore\";\nimport firebaseConfig from \"../firebaseOptions.js\";\n\nconsole.warn(firebaseConfig);\n\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n\n// Your web app's Firebase configuration\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\n// const analytics = getAnalytics(app);\nconst auth = getAuth(app);\nconst db = getFirestore(app);\n\n//login with google\nconst googleProvider = new GoogleAuthProvider();\nconst signInWithGoogle = async (e) => {\n  e.preventDefault();\n  try {\n    const res = await signInWithPopup(auth, googleProvider);\n    const user = res.user;\n    const q = query(collection(db, \"users\"), where(\"uid\", \"==\", user.uid));\n    const docs = await getDocs(q);\n    if (docs.docs.length === 0) {\n      console.warn(\"oi\");\n      await addDoc(collection(db, \"users\"), {\n        uid: user.uid,\n        name: user.displayName,\n        authProvider: \"google\",\n        email: user.email,\n      });\n    }\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\n//login with email/password\nconst logInWithEmailAndPassword = async (email, password) => {\n  try {\n    await signInWithEmailAndPassword(auth, email, password);\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\n//register new user w/ email/password\nconst registerWithEmailAndPassword = async (name, email, password) => {\n  try {\n    const res = await createUserWithEmailAndPassword(auth, email, password);\n    const user = res.user;\n    await addDoc(collection(db, \"users\"), {\n      uid: user.uid,\n      name,\n      authProvider: \"local\",\n      email,\n    });\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\n//reset password\nconst sendPasswordReset = async (email) => {\n  try {\n    await sendPasswordResetEmail(auth, email);\n    alert(\"Password reset link sent!\");\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\n//logout\nconst logout = () => {\n  signOut(auth);\n};\n\nexport {\n  auth,\n  db,\n  signInWithGoogle,\n  logInWithEmailAndPassword,\n  registerWithEmailAndPassword,\n  sendPasswordReset,\n  logout,\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}